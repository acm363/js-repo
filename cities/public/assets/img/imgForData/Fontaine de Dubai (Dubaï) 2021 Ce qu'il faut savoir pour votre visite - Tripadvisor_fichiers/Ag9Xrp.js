(this.$WP=this.$WP||[]).push(["Ag9Xrp",(e,t)=>{"use strict";var n,a,r,i,l,o,c,s,m,u,d,p,_,g,f,E,v,b,h,y,x,C,w,M,I,T,D,O,N,A=({title:e,children:t})=>n.createElement(_,{marginBottom:"spacing-04",className:"_2E96Oy2n"},t?n.createElement(n.Fragment,null,n.createElement(s,{variant:"supporting-02",color:"secondaryText",marginBottom:"spacing-02"},e),t):void 0);function k(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var P=e=>{var{isMobile:t,onExploreExperiences:a}=e,r=k(e,["isMobile","onExploreExperiences"]);return n.createElement(_,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},n.createElement(D,{variant:"primary",fullWidth:t,onClick:a},n.createElement(m,{id:"plus_trial_confirmation_explore_experiences"})),n.createElement(O,Object.assign({},r,{marginTop:t?"spacing-05":void 0}),n.createElement(m,{id:"plus_paywall_hr_confirmation_manage_subscription"})))},B=e=>{var{hotelId:t,isMobile:a,onNavigateToHr:r}=e,i=k(e,["hotelId","isMobile","onNavigateToHr"]);return t?n.createElement(_,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},n.createElement(D,{variant:"primary",onClick:r,fullWidth:a},n.createElement(m,{id:"plus_paywall_hr_confirmation_continue_to_hotel"})),n.createElement(O,Object.assign({},i,{marginTop:a?"spacing-05":void 0}),n.createElement(m,{id:"plus_paywall_hr_confirmation_manage_subscription"}))):n.createElement(_,{display:"flex",justifyContent:"flex-end"},n.createElement(D,Object.assign({},i,{variant:"primary",fullWidth:a}),n.createElement(m,{id:"plus_paywall_hr_confirmation_manage_subscription"})))},j=({variant:e,hotelId:t,isMobile:a,closeModal:r,onNavigateToHr:i,onNavigateToMembership:l,onExploreExperiences:o})=>{var c=((e,t,n)=>{switch(e){case"hotels":return{href:"/OptimusAccountManager",target:"_blank",onClick:n};case"attractions":return{href:"/OptimusAccountManager",target:"_blank"};case"memberCenter":return{href:"#",onClick:t};default:return null}})(e,r,l);switch(e){case"attractions":return n.createElement(P,Object.assign({isMobile:a,onExploreExperiences:o},c));case"memberCenter":case"hotels":return n.createElement(B,Object.assign({hotelId:t,isMobile:a,onNavigateToHr:i},c));default:return null}},H="Hotel_Review",S=({variant:e})=>{switch(e){case"attractions":return n.createElement(m,{id:"plus_trial_confirmation_title"});case"hotels":return n.createElement(m,{id:"plus_paywall_confirmation_title_v2"});default:return null}},W=({variant:e})=>{switch(e){case"attractions":return n.createElement(m,{id:"plus_trial_confirmation_message"});case"hotels":return n.createElement(m,{id:"plus_paywall_hr_confirmation_member_only_message"});default:return null}},K=({funnelKey:e,closeModal:t,hotelId:a,variant:p="hotels"})=>{var D,O,N,k,P,B,K=C(),L=w(),V=r((()=>e||M()),[e]),[,{uid:R}]=i(g),{userId:F}=n.useContext(f),Y=null!==F,{clearDiscountCode:X}=T();l((()=>{X()}));var[{data:G,fetching:Z},$]=I(),[z,J]=o(0);l((()=>{z<3&&!(null==G?void 0:G.isMember)&&!Z&&(J(z+1),$())}),[z,$,G,Z]);var U=x((()=>{K({optimusConfirmationModal:{locationId:a,funnelKey:V,pageviewUid:R}})})),q=c((e=>{L({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:e,locationId:a,isMemberSignedIn:Y,servletName:H,funnelKey:V}}})}),[V,L,Y,a]),Q=c((()=>{t(),q("HR")}),[t,q]),ee=c((()=>{q("PlusMembershipCenter")}),[q]),te=c((()=>{t()}),[t]),{viewportCategory:ne}=n.useContext(E),ae="MOBILE"===ne,re=u(),[ie]=b(),[{data:le,fetching:oe}]=y({billingAccountId:null==G?void 0:G.billingAccountId}),ce=(null==le?void 0:le.storedCardId)?le:null,{acctNumberTail:se,creditCardType:me,expMonth:ue,expYear:de}=ce||{},pe=null==G?void 0:G.trialDetails,_e="ACTIVE"===(null==pe?void 0:pe.trialStatus),ge=null==pe?void 0:pe.trialPeriodPrice,fe=(null==ge?void 0:ge.totalAmount)&&(null==ge||null==(D=ge.discountAmount)?void 0:D.discountAmount)?(null==ge?void 0:ge.totalAmount)-(null==ge||null==(O=ge.discountAmount)?void 0:O.discountAmount):0,Ee=null==G||null==(N=G.subscriptionPrice)?void 0:N.amountPaid,ve=null==G||null==(k=G.nextCharge)?void 0:k.totalAmount,be=!!(null==G||null==(P=G.subscriptionPrice)?void 0:P.discountAmount)&&0===Ee,he=!!(null==G||null==(B=G.subscriptionPrice)?void 0:B.discountAmount)&&(null==ve||null==Ee||ve>Ee),ye=(null==G?void 0:G.startDate)?re.formatDate("date_long",G.startDate):null,xe=null;(null==G?void 0:G.renewalDate)&&(xe=re.formatDate("date_long",G.renewalDate)),!(null==G?void 0:G.autoRenew)&&(null==G?void 0:G.endDate)&&(xe=n.createElement(m,{id:"plus_management_center_non_renewing_member",args:{0:re.formatDate("date_long",G.endDate)}}));var Ce=n.createElement(j,{variant:p,isMobile:ae,hotelId:a,closeModal:t,onNavigateToHr:Q,onNavigateToMembership:ee,onExploreExperiences:te});return n.createElement("div",{className:"_3_mrZjnb",ref:U},n.createElement(d,{variant:"plus-logo-short",height:44}),n.createElement(s,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03"},n.createElement(S,{variant:p})),n.createElement(s,{variant:"body-01",marginTop:"spacing-02"},n.createElement(W,{variant:p})),n.createElement("div",{className:"_1mpnnGDm"}),n.createElement(s,{variant:"title-05"},n.createElement(m,{id:"plus_paywall_hr_confirmation_membership_details_title"})),ie&&n.createElement(s,{variant:"body-01",marginTop:"spacing-01"},n.createElement(m,{id:"plus_paywall_hr_confirmation_membership_details_subtitle",args:{email:null==ie?void 0:ie.email}})),Z||oe?n.createElement(n.Fragment,null,n.createElement(v,{height:24,width:"100%",marginTop:6}),n.createElement(v,{height:24,width:"70%",marginTop:6}),n.createElement(v,{height:24,width:"70%",marginTop:6}),n.createElement(v,{height:24,width:"100%",marginTop:6,marginBottom:6})):n.createElement(_,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between"},_e&&Ee&&n.createElement(A,{title:n.createElement(m,{id:"plus_confirmation_price_section"})},n.createElement("span",null,n.createElement(m,{id:"plus_trial_account_management_price_today",args:{0:re.formatCurrencyInteger(fe)}}),n.createElement("br",null),n.createElement(m,{id:"plus_trial_account_management_price_renewal",args:{0:re.formatCurrencyInteger(Ee)}}))),!_e&&(Ee||be)&&n.createElement(A,{title:n.createElement(m,{id:"plus_confirmation_price_section"})},n.createElement(s,{variant:"body-01"},Ee?n.createElement(m,{id:"plus_account_management_price_per_year",args:{0:Math.floor(Ee)===Ee?re.formatCurrencyInteger(Ee):re.formatCurrency(Ee)}}):re.formatCurrencyInteger(0)),he&&ce&&n.createElement(s,{variant:"supporting-01"},n.createElement(m,{id:"plus_account_management_price_discounted"}))),(null==G?void 0:G.subscriptionNumber)&&n.createElement(A,{title:n.createElement(m,{id:"plus_confirmation_subscription_number_section"})},n.createElement(s,{variant:"body-01"},G.subscriptionNumber)),n.createElement(A,{title:n.createElement(m,{id:"plus_confirmation_payment_section"})},ce&&n.createElement(h,{paymentMethod:{cardType:me,numberTail:se,expiryMonth:ue,expiryYear:de},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})),ye&&n.createElement(A,{title:ce?n.createElement(m,{id:"plus_confirmation_date_purchased_section"}):n.createElement(m,{id:"plus_confirmation_start_date_section"})},n.createElement(s,{variant:"body-01"},ye)),xe&&n.createElement(A,{title:n.createElement(m,{id:"plus_confirmation_date_renews_section"})},n.createElement(s,{variant:"body-01"},xe))),n.createElement(_,{marginTop:"spacing-04",marginBottom:"spacing-05"},Ce))},L=({funnelKey:e,closeModal:t,hotelId:a})=>{var i=w(),l=r((()=>e||M()),[e]),{userId:o}=n.useContext(f),s=null!==o,m=c((()=>{t(),i({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:a,isMemberSignedIn:s,servletName:H,funnelKey:l}}})}),[t,l,i,s,a]);return n.createElement(p,{onClose:m,backgroundColor:"beige"},n.createElement(K,{funnelKey:l,hotelId:a,closeModal:t}))};return[()=>{N=a(!1),e("default",L),e({IsConfirmationModalOpen:N,SubscriptionConfirmation:K})},[e=>(n=e.default,a=e.createContext,r=e.useMemo,i=e.useContext,l=e.useEffect,o=e.useState,c=e.useCallback),e=>s=e.default,e=>(m=e.default,u=e.useIntlFormatter),e=>d=e.default,e=>p=e.ModalContainer,e=>_=e.Box,e=>(g=e.Route,f=e.Visitor,E=e.Device),e=>v=e.default,e=>b=e.useSensitiveFlowState,e=>h=e.default,e=>y=e.useDefaultPaymentData,e=>x=e.useOnVisible,e=>C=e.useImpressionLogger,e=>w=e.useInteractionLogger,e=>M=e.uuid,e=>I=e.useOptimusSubscription,e=>T=e.useDiscountCodePersistance,e=>(D=e.default,O=e.BorderlessButtonLink)]]},["cDcdfi","VP50Wc","0DsHEV","TkeYrn","E1X9WP","SzaY02","2R4xv2","Xi-2HZ","rSObt2","1jVxH0","bk1Dsb","BLrxBS","30t50h","fsml46","O-HcBE","BWm3Dg","P89JOf","7yGKf-"]]);

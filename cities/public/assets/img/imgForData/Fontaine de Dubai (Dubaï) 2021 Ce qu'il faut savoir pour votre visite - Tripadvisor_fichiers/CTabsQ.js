(this.$WP=this.$WP||[]).push(["CTabsQ",(e,t)=>{"use strict";var n,a,r,l,u,o,s,i,c,d,f,m,g,v,p,D,h,k,y,E,P,A,B,O,b,S,R,C,I,x,w,M;function T({picker:e,inputField:t,onClose:n,inline:r,alignEdge:l,onReset:u,autoAdvance:o=!0}){var{viewportCategory:s}=i(B),f=null==e?void 0:e.renderPicker({setValue:e.setValue,onApply:e.onApply,value:e.value}),m=(t=!1)=>a.createElement(c,{disabled:t,size:"small",onClick:()=>{null==e||e.onApply(),o||n()}},a.createElement(S,{id:"phoenix_picker_apply"})),g=u?a.createElement(d,{onClick:u,variant:"accent"},a.createElement(S,{id:"sng_fusion_list_filters_modal_reset"})):null;return"MOBILE"===s?e?a.createElement(D,{header:t,stickyHeader:!0,slideFrom:r?"right":"bottom",onClose:n,heightOption:"full",closeButtonPosition:r?"left":void 0,closeButtonIcon:r?"single-chevron-left":void 0,primaryButton:m(e.isApplyButtonDisabled),secondaryButton:g},a.createElement("div",{className:"_2tkHAKDl"},f||"")):null:a.createElement(a.Fragment,null,r&&e&&a.createElement("div",{className:"SbEP4uFH"},f),!r&&(null==e?void 0:e.ref.current)&&a.createElement(a.Fragment,null,a.createElement(b,{animated:!0,unstyled:!0,position:"below",shiftY:12,arrowType:"none",alignEdge:l,target:e.ref.current,autoFocus:!0,shouldRestoreFocus:!0},a.createElement("div",{className:"_2_4wMH69"},f,e.showApplyButton&&a.createElement("div",{className:"_2YJ1IMhe"},m(e.isApplyButtonDisabled)))),a.createElement(k,{event:"click",callback:n})))}function _({pickers:e,autoAdvance:t=!0,onBeforeAdvance:n=(()=>!0),onOpen:i,onClose:c,onComplete:d=(()=>{}),autoOpen:g=!1,autoOpenDelay:v=2e3,inputFieldVariant:p="ENTRY",inline:D=!1,children:k,onReset:E,alignEdge:P="left",mapSurface:A}){var B=l(null),O=l(null),b=l(null),{trackClick:S}=y(),R=C(),x=u((()=>{R&&null!=O.current&&O.current.ref.current.focus()}),[R]),w=u((e=>{e&&b.current?b.current(e):t&&B.current&&O.current&&n(O.current)&&null==B.current()&&(x(),d())}),[t,n,d,x]),M=o((()=>Array.from({length:e.length},(()=>a.createRef()))),[e.length]),_=a.useCallback((e=>{var t=e.onApply?e.onApply():null;return t?w(t):(x(),d()),null}),[w,x,d]),V=a.useCallback((e=>{var t=e.onApply?e.onApply():null;w(t)}),[w]),H=o((()=>e.map(((e,n)=>Object.assign({},e,{setValue:t=>{var n=e.setValue?e.setValue(t):null;w(n)},onApply:t?()=>V(e):()=>_(e),ref:M[n]})))),[e,t,_,V,M,w]),F=g&&0===v,{openPicker:j,nextPicker:N,closePicker:W,currentPicker:L,getPickerValues:z,isOpen:K}=function(e,t=!1){var n,[a,o]=r(t?null==(n=e[0])?void 0:n.name:null),s=l(null);s.current=e.find((e=>e.name===a));var i=u((()=>{var t;if(!a)return null;var n=e.findIndex((e=>e===s.current)),r=null==(t=e[n+1])?void 0:t.name;return o(r),r}),[a,e]),c=u((()=>{o(null)}),[o]),d=u((t=>{var n=t||e[0].name;o(n)}),[e]),{trackClick:f}=y();return I("Escape",c),{isOpen:!!a,nextPicker:i,closePicker:c,openPicker:d,getPickerValues:e=>{var t=s.current;return{isOpen:e.name===(null==t?void 0:t.name),isDimmed:null==t||e!==t,onClick:()=>{f({clientContext:`click${e.name[0].toUpperCase()}${e.name.substring(1)}PickerButton`}),o(e.name)}}},currentPicker:s.current}}(H,F);B.current=N,O.current=L,b.current=j,s((()=>{var e=g&&!F&&b.current?setTimeout(b.current,v):null;return()=>clearTimeout(e)}),[g,v,F]),s((()=>{L&&(S({clientContext:A?"mapDatepicker":"pickerOpened",clientParameter:L.name}),null==i||i(L))}),[L,S,i,A]);var Y=()=>{x(),W(),L&&(null==c||c(L))},G=(e=!1)=>a.createElement("div",null,a.createElement(m,{variant:p},H.map((e=>e.renderButton(null==L?void 0:L.name,function(e,t,n){return{selected:!n.isDimmed,onClick:n.onClick,key:e.name,ref:e.ref}}(e,0,z(e)))))),e&&a.createElement("div",{className:"_2Ib2Ahii"},a.createElement(f,{marginY:"spacing-05"}))),U=E?()=>{E(),w("startDate")}:void 0,$=()=>a.createElement(h,{events:["onClick","onTouchStart"]},G(),a.createElement(T,{picker:L,inputField:G(!0),onClose:Y,inline:D,alignEdge:P,onReset:U,autoAdvance:t}));return I("Escape",Y),k?k({renderPickerFlow:$,currentPicker:L,closePicker:W}):$()}var V=({fromMonth:e,monthRange:t,maxRangeDays:a,startDate:r,endDate:l,onDateSelect:u,onDateReset:o,onDateRangeSelect:s,numberOfMonths:i,layoutStyle:c,fullHeight:d,fullWidth:f,isEndDate:m=!1,disableBefore:g=new Date})=>{var[v,p]=n.useState(m?r:null);n.useEffect((()=>{p(m?r:null)}),[r,m]);var D=n.useCallback(((e,t)=>{t||(!v||!m&&v>=e?(p(e),u&&u(e,!1)):e>v?(u&&u(e,!0),s&&s(v,e),p(null)):e<v&&(u&&u(e,!1),p(e)))}),[v,m,s,u]);return n.createElement(x,{onDateReset:o,month:v||r,fromMonth:e,monthRange:t,numberOfMonths:i,layoutStyle:c,startDate:v||r,endDate:v?null:l,onDateSelect:D,fullWidth:f,fullHeight:d,maxRangeDays:v||m?a:null,disableBefore:g})};function H(e,t,n,r,l,u,o){return n?a.createElement(g,Object.assign({date:u?e:t},o)):u?a.createElement(v,Object.assign({from:r?null:e,to:r?null:t},o)):null}function F({startDate:e,endDate:t,isDefaultDates:n,setDates:r,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:d}=i(B),f="MOBILE"===d,m="DESKTOP"===d;return o((()=>{var o=r=>({setValue:o})=>a.createElement(V,{fromMonth:c||new Date,monthRange:f?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:f?"infiniteVerticalScroll":"paginated",onDateSelect:o,isEndDate:r,disableBefore:s||new Date,fullWidth:!0});return[{name:"startDate",value:e,setValue:e=>{r(e,!0)},onApply:()=>{n&&r(e,!0)},renderButton:(a,r)=>H(e,t,a,n,0,!0,r),renderPicker:o()},{name:"endDate",value:t,setValue:t=>t<e?(r(t,!0),"endDate"):(r(t,!1),null),renderButton:(a,r)=>H(e,t,a,n,0,!1,r),renderPicker:o(!0)}]}),[t,n,m,f,l,r,e,u,s,c])}function j({startDate:e,endDate:t,isDefaultDates:n,setDates:r,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:d}=i(B),f="MOBILE"===d,m="DESKTOP"===d;return o((()=>({name:"dateRange",value:e,setValue:e=>r(e)?null:"dateRange",renderButton:(r,l)=>function(e,t,n,r,l,u,o){return a.createElement(v,Object.assign({from:r?null:e,to:r?null:t},o))}(e,t,0,n,0,0,l),renderPicker:({setValue:r})=>a.createElement(V,{fromMonth:c||new Date,monthRange:f?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:f?"infiniteVerticalScroll":"paginated",onDateSelect:r,disableBefore:s||new Date,fullWidth:!0})})),[t,n,m,f,l,r,e,u,s,c])}var N=({fromMonth:e,monthRange:t,selectedDate:a,onDateSelect:r,numberOfMonths:l,layoutStyle:u,fullWidth:o,fullHeight:s,disabledDates:i})=>{var c=n.useCallback(((e,t)=>{t||r&&r(e)}),[r]);return n.createElement(x,{month:a,fromMonth:e,monthRange:t,numberOfMonths:l,layoutStyle:u,startDate:a,onDateSelect:c,fullHeight:s,fullWidth:o,disabledDates:i})};function W({date:e,setDate:t,availableDates:n,isDefaultDates:r,showApplyButton:l}){var{viewportCategory:c}=i(B),d="MOBILE"===c,f="DESKTOP"===c,m=u((e=>!!n&&!n.has(e.toISOString().split("T")[0])),[n]),v=m(e)&&n?(e=>{var t=null==e?void 0:e.values().next().value;if(null!=t){var[n,a,r]=t.split("-").map((e=>parseInt(e,10)));return new Date(n,a-1,r)}return null})(n):e;return s((()=>{v&&v.getTime()!==e.getTime()&&t(v)}),[e,v,t]),o((()=>({name:"date",value:v,showApplyButton:l,setValue:e=>{t(e)},onApply:()=>(r&&t(e),null),renderButton:function(e,t){return a.createElement(g,Object.assign({date:r?null:v},t))},renderPicker:function({setValue:e}){return a.createElement(N,{fromMonth:new Date,monthRange:24,numberOfMonths:f?2:1,selectedDate:v,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:e,fullWidth:!0,disabledDates:m})}})),[f,d,t,m,l,v,r,e])}var L=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,z=e=>{if(null!=e&&L.test(e)){var t=new Date(`${e}T00:00`);if(!isNaN(t.getTime()))return t}return null},K=(e,t)=>{var n=z(e);if(null!==n)return n;var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate()+t)};function Y(e,t,n){var{state:{commerce:a}}=E(),{update:{attractions:{setDates:r}}}=i(O),{trackClick:l}=y(),{startDate:o,endDate:s}=(null==a?void 0:a.attractionCommerce)||{},c=z(o),d=z(s),f=u(((t,a)=>{l({clientContext:n?"mapDatepicker":"setAttractionsDates",clientParameter:JSON.stringify({startDate:P(t),endDate:P(a)})}),r(t,a),e({startDate:t,endDate:a})}),[e,r,l,n]),m=u((e=>{var t=new Date(e.getTime()+864e5);f(e,t)}),[f]),g=u((()=>{r(null,null),l({clientContext:"resetAttractionsDates"}),e(null)}),[e,r,l]),v=K(null==t?void 0:t.startDate,0),p=K(null==t?void 0:t.endDate,1);return{singleDate:c||v,startDate:c||v,endDate:d||p,isDefaultDates:!(c&&d||(null==t?void 0:t.setByUser)),setDateRange:f,setSingleDate:m,resetDates:g}}function G(){var e,{state:{commerce:t},dispatch:n}=E(),{update:{attractions:{setPassengers:a}}}=i(O),{trackClick:r}=y({clientContext:"setAttractionsPax"}),l=null==t||null==(e=t.attractionCommerce)?void 0:e.pax;return{pax:o((()=>{var e=new Map;return l&&l.filter(Boolean).forEach((t=>{e.set(t.ageBand,t.count)})),e}),[l]),setPax:u((e=>{var t=[];e.forEach(((e,n)=>t.push({ageBand:n,count:e}))),r({clientParameter:JSON.stringify({pax:t})});var l=e.get("ADULT")||0,u=e.get("CHILD")||0;a(l,u),n({type:"setAttractionsPax",pax:t})}),[n,r,a])}}function U(e){var t,n,a,{hotels:r,update:{hotels:{setStayDates:l}}}=i(O),o=u((({checkIn:e,checkOut:t})=>{l(e,t)}),[l]);return null===r||r.defaultDates?(t=K(null==e?void 0:e.checkIn,0),n=K(null==e?void 0:e.checkOut,1),a=(null==e?void 0:e.setByUser)||null):(t=r.checkInDate,n=r.checkOutDate,a=!r.defaultDates),{dates:{checkIn:t,checkOut:n},setByUser:a,setDates:o}}function $(e){var t,{hotels:n,update:{hotels:{setGuestInfo:a,setTravelInfo:r}}}=i(O),{defaultRooms:l,defaultAdults:s,defaultChildrenAges:c,checkIn:d,checkOut:f}=o((()=>(e=>{if(null==(null==e?void 0:e.rooms))return M;var t=0,n=[],{rooms:a}=e;return a.filter(Boolean).forEach((e=>{t+=null==e.adults?0:e.adults,null!=e.childrenAges&&n.push(...e.childrenAges.filter(Boolean))})),{defaultRooms:a.length,defaultAdults:t,defaultChildrenAges:n,checkIn:e.checkIn,checkOut:e.checkOut}})(e)),[e]),m=u((({rooms:e,adults:t,childrenAges:l})=>((e,t,n,a,r)=>(l,u,o)=>{var s=A(o,l);null!=n?e(u,l,s):t(a,r,u,l,s)})(a,r,n,d,f)(e,t,l)),[a,r,n,d,f]);return[{rooms:(null==n?void 0:n.rooms)||l,adults:(null==n?void 0:n.adults)||s,childrenAges:(null==n||null==(t=n.childAgesPerRoom)?void 0:t.flat())||c},m]}function Z(){var{update:{hotels:{setTravelInfo:e}}}=i(O);return{setTravelInfo:u((({dates:{checkIn:t,checkOut:n},guests:{rooms:a,adults:r,childrenAges:l}})=>{e(t,n,r,a,A(l,a))}),[e])}}var J=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,r,l;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(r=a;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((a=t.length)!=n.length)return!1;for(r=a;0!=r--;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=a;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,l[r]))return!1;for(r=a;0!=r--;){var u=l[r];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n},X=e=>Array.from(e.values()).reduce(((e,t)=>e+t),0);function q({passengerInfo:e,currentPax:t,setPax:n,showApplyButton:l}){var[i,c]=r(t),[d,f]=r(null),{localize:m}=R();s((()=>{c(t)}),[t,c]),s((()=>{var a;if(e){var r=!1,l=new Map(t),u=null==(a=e.ageBands)?void 0:a.filter(Boolean);u&&u.length&&(u.forEach((e=>{var n=null!=e.minTravelersPerBooking?e.minTravelersPerBooking:0,a=null!=e.maxTravelersPerBooking?e.maxTravelersPerBooking:10,u=t.get(e.ageBand)||0;u<n?(l.set(e.ageBand,n),r=!0):u>a&&(l.set(e.ageBand,a),r=!0)})),t.forEach(((e,t)=>{u.find((e=>e.ageBand===t))||(l.delete(t),r=!0)}))),r&&n(l)}}),[t,e,n]);var g=u(((e,t)=>{f(null),c((n=>new Map([...n.entries(),[e,t]])))}),[]),v=o((()=>X(t)),[t]),D=u((()=>{return t=null==e?void 0:e.requiresAdultForBooking,n=i,!1!==t&&0===n.get("ADULT")&&0===n.get("SENIOR")?(f(m.string("attractions.booking.errors.no_travelers")),!1):0===X(i)?(f(m.string("attractions.booking.select_travelers_to_see_availability")),!1):!!(e=>{var t=!0;return e.forEach(((e,n)=>{"INFANT"!==n&&e>0&&(t=!1)})),!t})(i)||(f(m.string("exp_booking_no_only_infants")),!1);var t,n}),[i,m,e]),h=u((()=>D()?(J(i,t)||n(i),null):"pax"),[i,n,D,t]);return o((()=>({name:"pax",showApplyButton:l,value:null,onApply:h,renderButton:function(e,t){return a.createElement(p,Object.assign({guests:v},t))},renderPicker:function(){return e?a.createElement(w,{passengerInfo:e,selections:i,onAgeBandChange:g,errorMessage:d}):null}})),[d,i,h,e,g,l,v])}return e({useAttractionDates:Y,useAttractionPax:G,useDateRangePicker:j,useDateRangePickers:F,useHotelDates:U,useHotelGuests:$,useHotelTravelInfo:Z,usePaxPicker:q,useSingleDatePicker:W}),[()=>{M={defaultRooms:1,defaultAdults:2,defaultChildrenAges:[],checkIn:new Date,checkOut:new Date},e("default",_),e({useAttractionDates:Y,useAttractionPax:G,useDateRangePicker:j,useDateRangePickers:F,useHotelDates:U,useHotelGuests:$,useHotelTravelInfo:Z,usePaxPicker:q,useSingleDatePicker:W})},[e=>(n=e,a=e.default,r=e.useState,l=e.useRef,u=e.useCallback,o=e.useMemo,s=e.useEffect,i=e.useContext),e=>(c=e.default,d=e.BorderlessButton),e=>f=e.default,e=>(m=e.InputField,g=e.DateInputFieldItem,v=e.DateRangeInputFieldItem,p=e.GuestsInputFieldItem),e=>D=e.SlideInModal,e=>h=e.default,e=>k=e.default,e=>(y=e.useTracking,E=e.useEntrypointContext,P=e.ISODateString,A=e.assignHotelChildrenToRooms),e=>(B=e.Device,O=e.TravelInfo),e=>b=e.default,e=>(S=e.default,R=e.useLocalize),e=>C=e.useKeyboardNavigationMode,e=>I=e.useKeyboardEvent,e=>x=e.default,e=>w=e.default]]},["cDcdfi","7yGKf-","jPSRY1","pyjSAG","E1X9WP","_cZwhS","Dg5_-9","PEYes_","2R4xv2","MHKLZN","0DsHEV","W3_c4H","8xs-IB","-ZZ9nz","6SswlX"]]);

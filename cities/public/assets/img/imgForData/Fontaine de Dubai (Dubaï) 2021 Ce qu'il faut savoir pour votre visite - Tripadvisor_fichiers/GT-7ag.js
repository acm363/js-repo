(this.$WP=this.$WP||[]).push(["GT-7ag",(e,t)=>{"use strict";var a,n,l,r,s,c,i,o,u,m,g,d,h,f,_,v,p,E,k,C,D,x,S,b,A,R,N,M=({model:e,setFusionDates:t,mapSurface:a})=>{var{viewportCategory:s}=l(_),c="MOBILE"!==s?"condensed":void 0,{startDate:i,endDate:g,isDefaultDates:d,setDateRange:h,setSingleDate:f,resetDates:v}=u(t,e,a),p=r(((e,t)=>{t?f(e):h(i,e)}),[i,h,f]),E=m({startDate:i,endDate:g,isDefaultDates:d,setDates:p,resetDates:v});return n.createElement(o,{pickers:E,inputFieldVariant:c,onReset:d?void 0:v,mapSurface:a})},O=({children:e})=>{var t=e.filter(Boolean);return a.createElement(a.Fragment,null,t.map(((e,t)=>a.createElement(a.Fragment,{key:t},t>0&&a.createElement(C,null),e))))},T="_3UR4aZGx",y="_2GWEjb2V",P="_3-NA5FeW",I=/^(0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17)$/,F=e=>null!=e&&e>=0&&e<=17,L=({id:e,label:t,age:n,onChange:l})=>{var{localize:r}=E(),[s,c]=a.useState(),i=r.string("fusion_min_max_range",{minNumber:0,maxNumber:17}),o=r.string("fusion_guest_picker_error_message",{minAge:0,maxAge:17}),u=-1===n?"":String(n),[m,g]=a.useState(u),d=a.useCallback((e=>{var t=e.target.value;g(t),I.test(t)?(c(null),l(Number(t))):(c(o),l(-1))}),[l,c,g,o]);return a.createElement(a.Fragment,null,a.createElement(D,{variant:"stack"},a.createElement("div",{className:"_3HKdojD-"},a.createElement("label",{htmlFor:e},a.createElement(S,{variant:"title-05",color:F(n)?"primaryText":"dangerText"},t)),a.createElement("div",{className:"-wT_8rWU"},a.createElement(k,{type:"text",maxLength:2,id:e,value:m,onChange:d,placeholder:i})))),s&&a.createElement(S,{color:"dangerText",marginTop:"spacing-02",variant:"supporting-02"},a.createElement("div",{className:"_9hDIiBeY",role:"alert","aria-controls":e},s)))},w=({model:e,action:t})=>{var{localize:n}=E(),l=e.config.maxRooms*e.config.maxAdultsPerRoom,r=Math.min(e.rooms*e.config.maxChildrenPerRoom,e.config.maxChildren);return a.createElement("div",{className:"_1wg0W9Y7"},a.createElement(O,null,a.createElement("div",{className:T},a.createElement(D,{variant:"two",gap:"wide",stackMode:"noStack"},a.createElement("div",{className:P},a.createElement(S,{variant:"title-05"},a.createElement(p,{id:"fusion_guest_picker_rooms_title"})," ")),a.createElement("div",{className:y},a.createElement(x,{rangeMin:1,rangeMax:e.config.maxRooms,currentStepValue:e.rooms,onStepChange:e=>t({type:"SET_ROOMS",value:e}),minusLabel:n.string("fusion_guest_picker_rooms_less_rooms_label"),plusLabel:n.string("fusion_guest_picker_rooms_more_rooms_label")})))),a.createElement("div",{className:T},a.createElement(D,{variant:"two",gap:"wide",stackMode:"noStack"},a.createElement("div",{className:P},a.createElement(S,{variant:"title-05"},a.createElement(p,{id:"fusion_guest_picker_adult_title"})," ")),a.createElement("div",{className:y},a.createElement(x,{rangeMin:1,rangeMax:l,currentStepValue:e.adults,onStepChange:e=>t({type:"SET_ADULTS",value:e}),minusLabel:n.string("fusion_guest_picker_less_adults_label"),plusLabel:n.string("fusion_guest_picker_more_adults_label")})),a.createElement("div",{className:P},a.createElement(S,{variant:"title-05"},a.createElement(p,{id:"fusion_guest_picker_children_title"})," ")),a.createElement("div",{className:y},a.createElement(x,{rangeMin:0,rangeMax:r,currentStepValue:e.childrenAges.length,onStepChange:e=>t({type:"SET_CHILDREN",value:e}),minusLabel:n.string("fusion_guest_picker_less_children_label"),plusLabel:n.string("fusion_guest_picker_more_children_label")})))),e.childrenAges.length>0&&a.createElement("div",{className:T},a.createElement("div",{className:"_2VfoGkCF"},e.childrenAges.map(((e,l)=>{var r=n.string("fusion_guest_picker_child_age_title",{i:l+1});return a.createElement("div",{key:l},a.createElement(L,{id:`guest-picker-child-age-${l}`,onChange:e=>t({type:"SET_CHILD_AGE",value:e,index:l}),age:e,label:r}))}))))))},G="_1pkvBND2",j=e=>Object.assign({},e,{valid:e.childrenAges&&!e.childrenAges.find((e=>!F(e)))}),H=(e,t)=>{var a,n,l;switch(t.type){case"SET_GUESTS":return t.guests.rooms===e.rooms&&t.guests.adults===e.adults&&v(t.guests.childrenAges,e.childrenAges)?e:j(Object.assign({},e,{rooms:t.guests.rooms,childrenAges:t.guests.childrenAges,adults:t.guests.adults}));case"SET_ROOMS":if(null==t.value)return e;n=Math.max(1,Math.min(e.config.maxRooms,t.value)),l=Math.max(Math.min(e.adults,n*e.config.maxAdultsPerRoom),n),a=e.childrenAges.slice(0,Math.min(n*e.config.maxChildrenPerRoom,e.config.maxChildren));break;case"SET_ADULTS":if(null==t.value)return e;l=Math.min(e.config.maxRooms*e.config.maxAdultsPerRoom,t.value),n=Math.min(Math.max(Math.ceil(l/e.config.maxAdultsPerRoom),e.rooms),l),a=e.childrenAges.slice(0,Math.min(n*e.config.maxChildrenPerRoom,e.config.maxChildren));break;case"SET_CHILD_AGE":return null==t.index||null==t.value||isNaN(t.value)?e:((a=[...e.childrenAges]).splice(t.index,1,t.value),j(Object.assign({},e,{childrenAges:a})));case"SET_CHILDREN":if(null==t.value)return e;for(var r=(a=[...e.childrenAges]).length;r<t.value;r++)a.push(-1);return a=a.slice(0,Math.min(e.rooms*e.config.maxChildrenPerRoom,e.config.maxChildren,t.value)),j(Object.assign({},e,{childrenAges:a}));case"SET_CONFIG":return null==t.config||v(t.config,e.config)?e:Object.assign({},e,{config:t.config});default:return e}return j(Object.assign({},e,{childrenAges:a,adults:l,rooms:n}))},Y=({config:e,guests:t,setGuests:n})=>{var[l,r]=a.useReducer(H,j({rooms:t.rooms,adults:t.adults,childrenAges:null==t.childrenAges?[]:t.childrenAges,valid:!0,config:e}));a.useEffect((()=>r({type:"SET_CONFIG",config:e})),[e,r]);var s=a.useCallback(((e,n)=>a.createElement(N,Object.assign({},n,{people:t.adults+t.childrenAges.length,rooms:t.rooms}))),[t]),c=l.valid;return{name:"hotelGuests",value:t,showApplyButton:!0,onApply(){n({rooms:l.rooms,adults:l.adults,childrenAges:l.childrenAges})},isApplyButtonDisabled:!c,renderButton:s,renderPicker:()=>a.createElement(w,{model:l,action:r})}},B={maxRooms:8,maxAdultsPerRoom:4,maxChildrenPerRoom:10,maxChildren:20,defaultAdults:2,defaultChildren:0,defaultRooms:1},U=(e,t)=>e===t||!(!e||!t)&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),V=({model:e,datePickerConfig:t,guestPickerConfig:n=B,setFusionTravelInfo:l})=>{var r,{dates:{checkIn:i,checkOut:u},setDates:m,setByUser:p}=g(e),[E,k]=d(Object.assign({},e,{checkIn:i,checkOut:u})),{setTravelInfo:C}=h(),[D,x]=a.useState([]),S=a.useRef(null),b=a.useCallback((e=>{var[t]=D,a=[];return 1!==D.length?a=[e]:e>t?a=[t,e]:e<t&&(a=[e,t]),x(a),a.length>1}),[D]),A=a.useCallback((e=>{S.current=e}),[]),R=null==D?void 0:D[0],N=null==D?void 0:D[1],{trackClick:M}=s(),O=a.useCallback((()=>{var e=null==R||null==N||U(R,i)&&U(N,u)?null:{checkIn:R,checkOut:N};e&&M({clientContext:"setHotelDates",clientParameter:JSON.stringify({checkIn:c(e.checkIn),checkOut:c(e.checkOut)})});var t=null==S.current||v(E,S.current)?null:S.current;t&&M({clientContext:"setHotelGuests",clientParameter:JSON.stringify(t)}),null!=e?null!=t?C({dates:e,guests:t}):m(e):null!=t&&k(t),null==e&&null==t||l({dates:e,guests:t}),x([]),S.current=null}),[R,N,i,u,k,m,C,M,E,l]),T=R||i,y=R?N:u,P=a.useRef((r=new Date,[new Date(r.getFullYear(),r.getMonth(),r.getDate()),new Date(r.getFullYear(),r.getMonth(),r.getDate()+1)])),I=a.useMemo((()=>!U(T,P.current[0])||!U(y,P.current[1])),[T,y]),F=a.useCallback((()=>{M({clientContext:"resetHotelDates"}),x(P.current)}),[M]),L=I?F:void 0,w=[f({startDate:T,endDate:y,isDefaultDates:!p&&!R,setDates:b,resetDates:L,maxRangeDays:null==t?void 0:t.maxStayLength}),Y({config:n,guests:E,setGuests:A})],G="MOBILE"===a.useContext(_).viewportCategory;return a.createElement(o,{pickers:w,autoOpen:!G&&!p,autoOpenDelay:0,onComplete:O,onClose:O,onReset:L})},W=({model:e})=>n.createElement(R,{jira:"SNG-738",message:"Restaurant commerce pickers",valueToDump:e}),J=e=>{var t=(e=>{var{model:t,contentType:a,datePickerConfig:l,actions:r,mapSurface:s}=e;switch(a){case"attraction":case"attraction_product":return t.attractionCommerce?n.createElement(M,{model:t.attractionCommerce,setFusionDates:r.setAttractionsDates,mapSurface:s}):null;case"hotel":return t.hotelCommerce?n.createElement(V,{model:t.hotelCommerce,datePickerConfig:null==l?void 0:l.hotelDatePickerConfig,setFusionTravelInfo:r.setHotelTravelInfo}):null;case"restaurant":return t.restaurantCommerce?n.createElement(W,{model:t.restaurantCommerce}):null;default:return n.createElement(i,{message:`No commerce parameters for content type ${String(a)}`})}})(e);return n.createElement("div",{className:"_14aMtg6L"},t)};return[()=>{N=a.forwardRef(((e,t)=>{var{rooms:n,people:l}=e,r=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,["rooms","people"]);return a.createElement(b,Object.assign({},r,{ref:t}),a.createElement("span",{className:G},a.createElement(A,{name:"hotels"})," ",n," "),a.createElement("span",{className:G},a.createElement(A,{name:"users"})," ",l," "))})),e("default",J),e("HotelCommerceParameters",V)},[e=>(a=e,n=e.default,l=e.useContext,r=e.useCallback),e=>(s=e.useTracking,c=e.ISODateString,i=e.APSUnexpected),e=>(o=e.default,u=e.useAttractionDates,m=e.useDateRangePickers,g=e.useHotelDates,d=e.useHotelGuests,h=e.useHotelTravelInfo,f=e.useDateRangePicker),e=>_=e.Device,e=>v=e.default,e=>(p=e.default,E=e.useLocalize),e=>k=e.TextInput,e=>C=e.default,e=>D=e.default,e=>x=e.default,e=>S=e.default,e=>b=e.InputFieldItem,e=>A=e.default,e=>R=e.default]]},["cDcdfi","PEYes_","CTabsQ","2R4xv2","YwNsO_","0DsHEV","7bbexq","jPSRY1","87JRug","aue22J","VP50Wc","pyjSAG","pyY-iJ","mUW0_y"]]);

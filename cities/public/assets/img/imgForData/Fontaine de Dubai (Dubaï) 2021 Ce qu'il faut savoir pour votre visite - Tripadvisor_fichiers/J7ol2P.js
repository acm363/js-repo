(this.$WP=this.$WP||[]).push(["J7ol2P",(e,i)=>{"use strict";var t,a,r,n,l,s,o,u,d,m,c,v,h,p,k,g,_,f,S,N,w,E,T,F,y,z,A,R,C,I,b="_2TxMfmHi",x="HORIZON_FALLBACK",H=()=>{var{localize:e}=E(),[,{uid:i}]=r(d),t=y(),s=z(),[u]=n(F()),m=T((()=>{t({optimusAd:{pageviewUid:i,funnelKey:u,position:x}})})),c=l((()=>{s({OptimusAdInteraction:{optimusAdClick:{pageviewUid:i,funnelKey:u,position:x}}})}),[s,i,u]),v=`/Plus?ik=${u}`;return a.createElement("div",{ref:m,className:"_2bVMxI72"},a.createElement("div",{className:"ATPmtVtV"},a.createElement("div",{className:"QAKGp-pF"},a.createElement("div",{className:"_2Uw3CZQU"},e.string("plus_home_takeover_horizon_header")),a.createElement("div",{className:o(b,"i4sk4jWp")},a.createElement(w,{variant:"plus-logo-full-all-white",height:58}),a.createElement(N,{variant:"on-dark-outline",href:v,onClick:c},e.string("plus_home_takeover_learn_more"))),a.createElement("div",{className:o(b,"_1iRGB-H-")},a.createElement(w,{variant:"plus-logo-full-all-white",height:22}),a.createElement(N,{variant:"on-dark-outline",size:"small",href:v,onClick:c},e.string("plus_home_takeover_learn_more"))))))},V=e=>{var i=e.code;return[{url:`/img2/langs/${i}/horizon/Sky_banner_300x175.jpg`,width:300,height:175},{url:`/img2/langs/${i}/horizon/Sky_banner_768x350.jpg`,width:768,height:350},{url:`/img2/langs/${i}/horizon/Sky_banner_1024x350.jpg`,width:1024,height:350},{url:`/img2/langs/${i}/horizon/Sky_banner_1280x350.jpg`,width:1280,height:350}]},D=()=>{var{localize:e}=E(),{locale:i}=r(m);return a.createElement("a",{href:"https://www.youtube.com/watch?v=bppH2sVd5OM?utm_source=tripadvisor&utm_medium=home&utm_campaign=fallbackhorizon",target:"_blank"},a.createElement(A,{source:V(i),height:"100%",width:"100%",alt:e.string("horizon_watch_the_film")}))},O=({takeoverVariant:e})=>{switch(e){case"Optimus":return a.createElement(H,null);case"Vacations":return a.createElement(D,null);default:return console.error(`Missing horizon ad takeover fallback for variant: ${e}`),null}},L=["Airline_Review","AirlineDeals","Airlines","Airport","Articles","ArticlesHome","CheapFlightsHome","CheapFlightsSearchResults","Cruise_Review","CruiseDestination","Cruises","Flights","FlightsFrom","FlightsRoute","ForumHome","Home","RentalCars","RentalCarsSearch","RentalCarsGeo","Restaurant_Review","Restaurants","RestaurantsHome","ShowForum","ShowTopic","Tourism","Trips"],P=["Home","Tourism","ForumHome","ShowForum","ShowTopic"],B=["Restaurant_Review","Restaurants"],M=()=>{var[e]=r(d),{page:i}=e,{userId:a}=r(c),n=f(),l=function(){var e,i,[{params:a,page:r}]=t.useContext(d),n=a.tripId?parseInt(a.tripId,10):0,[l]=C({query:I,variables:{tripId:n},pause:"Trips"!==r||0===n});return!!(null==l||null==(e=l.data)||null==(i=e.trip)?void 0:i.sponsorship)}(),s=R("horizonAd"),o=!a,u=!!h("horizon"),{viewportCategory:m}=r(v);return!(!L.includes(i)&&!s)&&!("Trips"===i&&!l)&&(!("Tourism"!==i||!n)||!!u||(!B.includes(i)||"MOBILE"!==m)&&(!P.includes(i)||o))},$=(e,i)=>e?"DWqsJ0MN":i?"An3ADvD3":"_3hQc_oBM",j=({footer:e=!1})=>{var[i,t]=n(!1),{viewportCategory:l}=r(v),d="MOBILE"===l?"5x1|320x50":"5x1|728x90",m=e?"footer":"horizon",c=h(m),g=p(),{ref:f,id:S,isRendered:N,isEmpty:w}=k(d,m,g,!e),E=function(e){var[i,t]=n(!1);return s((()=>{if(!u.get("ads.horizonLoaded")){var i=setTimeout((()=>{t(!0),u.set("ads.horizonLoaded",!0)}),e);return()=>clearTimeout(i)}t(!0)}),[e]),i}(e?0:2e3);return s((()=>{var e=setTimeout((()=>{t(!0)}),5e3);return()=>clearTimeout(e)})),a.createElement("div",{className:o("ad",$(c,e))},(N||i)&&w&&!e&&(e=>e?a.createElement(O,{takeoverVariant:e}):a.createElement(_,null))(c),E&&a.createElement("div",{ref:f,id:S,className:o("_2NoPV5rh",{SPPOXG2Y:w})}))},G=e=>{var i=M(),t=S();return i?a.createElement(g,{value:t},a.createElement(j,e)):null};return[()=>{(I=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"TripSponsorQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"tripId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"trip"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"tripId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"tripId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sponsorship"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sponsorName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"impressionTracker"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"moatTracker"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"logo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}]}}]}}],"loc":{"start":0,"end":274}}')).__key=68353162175359,e("default",G),e({HorizonAd:j,useHorizonAd:M})},[e=>(t=e,a=e.default,r=e.useContext,n=e.useState,l=e.useCallback,s=e.useEffect),e=>o=e.default,e=>u=e.default,e=>(d=e.Route,m=e.Environment,c=e.Visitor,v=e.Device),e=>h=e.useTakeoverVariant,e=>(p=e.useRefreshKey,k=e.useAd,g=e.AdTargetingProvider),e=>_=e.default,e=>(f=e.useSponsoredGeo,S=e.useCustomTripTargeting),e=>N=e.default,e=>w=e.default,e=>E=e.useLocalize,e=>T=e.useOnVisible,e=>F=e.uuid,e=>y=e.useImpressionLogger,e=>z=e.useInteractionLogger,e=>A=e.default,e=>R=e.default,e=>C=e.useQuery]]},["cDcdfi","jSLlaY","jaCyxS","2R4xv2","q0TyIl","dHlxRh","2IPQDU","gzFIw8","7yGKf-","TkeYrn","0DsHEV","BLrxBS","O-HcBE","30t50h","fsml46","BgJkqv","DY6uxn","5X2em-"]]);
